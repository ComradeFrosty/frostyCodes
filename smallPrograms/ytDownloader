import yt_dlp
import os

def download_video(youtube_url, output_path="downloads"):
    """Download a YouTube video in MP4 format"""
    if not os.path.exists(output_path):
        os.makedirs(output_path)
    
    ydl_opts = {
        'format': 'best[ext=mp4]',
        'noplaylist': True,
        'outtmpl': os.path.join(output_path, '%(title)s.%(ext)s'), #You can give a path where you want to download the file
        'quiet': False,
    }
    
    try:
        with yt_dlp.YoutubeDL(ydl_opts) as ydl:
            print(f"Downloading video from: {youtube_url}")
            info = ydl.extract_info(youtube_url, download=True)
            print(f"✓ Successfully downloaded: {info['title']}")
            
    except Exception as e:
        print(f"✗ Error downloading video: {e}")

def download_as_mp3(youtube_url, output_path="downloads"):
    """Download a YouTube video and convert to MP3"""
    if not os.path.exists(output_path):
        os.makedirs(output_path)
    
    ydl_opts = {
        'format': 'bestaudio/best',
        'postprocessors': [{
            'key': 'FFmpegExtractAudio',
            'noplaylist': True,
            'preferredcodec': 'mp3',
            'preferredquality': '192',
        }],
        'outtmpl': os.path.join(output_path, '%(title)s'), #You can give a path where you want to download the file
        'quiet': False,
    }
    
    try:
        with yt_dlp.YoutubeDL(ydl_opts) as ydl:
            print(f"Downloading and converting to MP3: {youtube_url}")
            info = ydl.extract_info(youtube_url, download=True)
            print(f"✓ Successfully downloaded and converted: {info['title']}.mp3")
            

    except Exception as e:
        print(f"✗ Error: {e}")

if __name__ == "__main__":
  
    youtube_url = input("Enter YouTube URL: ").strip()
    
    print("\nChoose an option:")
    print("1. Download as MP4 video")
    print("2. Download as MP3 audio")
    choice = input("Enter your choice (1 or 2): ").strip()
    
    if choice == "1":
        download_video(youtube_url)
    elif choice == "2":
        download_as_mp3(youtube_url)
    else:
        print("Invalid choice!")
